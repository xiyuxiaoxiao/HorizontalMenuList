<html>
    <body>
        <input type="text" placeholder="消息内容" name="name" id="message" />
        <input type="text" placeholder="好友id" name="name" id="userId" />
        <button onclick="send()">send message</button>
        <script>
            var HOST = location.origin.replace(/^http/, 'ws') + "?userId=1000";
            var ws = new WebSocket(HOST);
            ws.onmessage = function (event) {
                // alert(event.data);
            }
            function send() {
                var message = document.getElementById("message").value;
                var userId = document.getElementById("userId").value;
                var json = {
                    'userId':userId,
                    'message':message
                }
                var strData = JSON.stringify(json);
                ws.send(strData);
            }
        </script>
    </body>
</html>